import React, { useRef, useState } from "react"
import styles from './UIPlayer.module.css'
const UIPlayer = ({word}:{word:string}) => {
const [playing,setPlaying] = useState(false)
const ref = useRef<any>();
let wordq = word.substring(0, word.indexOf("("))===''? word: word.substring(0, word.indexOf("("))      
const play = async () =>{
    setPlaying(true)
       await new Promise(res=>{
        ref.current.play()
        ref.current.onended = res
          })
    setPlaying(false)
}
  return ( 
    <>
    <svg onClick={()=>{play()}}  className={playing ?`${styles.playing} ${styles.svg_play}` : `${styles.svg_play}`} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M19.1845 3.6192C19.1563 3.44999 19.0922 3.2888 18.9964 3.14648C18.9006 3.00416 18.7754 2.88403 18.6293 2.79419C18.4832 2.70435 18.3195 2.64688 18.1492 2.62567C17.979 2.60445 17.8062 2.61998 17.6425 2.6712L9.2425 5.2956C8.99825 5.37185 8.78477 5.52418 8.63322 5.73035C8.48167 5.93651 8.39999 6.18573 8.4001 6.4416V16.2C7.85945 15.7945 7.19774 15.5835 6.52215 15.601C5.84657 15.6186 5.19671 15.8637 4.67786 16.2967C4.15901 16.7298 3.80156 17.3253 3.66343 17.9868C3.5253 18.6484 3.61459 19.3372 3.91682 19.9416C4.21905 20.5461 4.71652 21.0308 5.32863 21.3172C5.94074 21.6037 6.63163 21.675 7.28936 21.5197C7.94709 21.3645 8.53313 20.9917 8.95252 20.4618C9.37192 19.9318 9.6001 19.2758 9.6001 18.6V10.0416L18.0001 7.416V10.8276C18.4117 10.8636 18.8137 10.9392 19.2001 11.0484V3.816C19.2001 3.7488 19.1941 3.684 19.1845 3.6192ZM22.8001 17.4C22.8001 18.8322 22.2312 20.2057 21.2185 21.2184C20.2058 22.2311 18.8323 22.8 17.4001 22.8C15.9679 22.8 14.5944 22.2311 13.5817 21.2184C12.569 20.2057 12.0001 18.8322 12.0001 17.4C12.0001 15.9678 12.569 14.5943 13.5817 13.5816C14.5944 12.5689 15.9679 12 17.4001 12C18.8323 12 20.2058 12.5689 21.2185 13.5816C22.2312 14.5943 22.8001 15.9678 22.8001 17.4ZM20.0845 16.878L16.4917 14.898C16.4004 14.8475 16.2975 14.8217 16.1932 14.8231C16.0889 14.8245 15.9867 14.8531 15.8968 14.906C15.8069 14.959 15.7324 15.0345 15.6806 15.125C15.6287 15.2156 15.6014 15.3181 15.6013 15.4224V19.3824C15.6012 19.4868 15.6284 19.5895 15.6801 19.6802C15.7318 19.7709 15.8064 19.8466 15.8963 19.8997C15.9862 19.9527 16.0885 19.9814 16.1929 19.9829C16.2973 19.9844 16.4003 19.9585 16.4917 19.908L20.0845 17.928C20.1783 17.8761 20.2565 17.8001 20.3109 17.7077C20.3653 17.6154 20.394 17.5102 20.394 17.403C20.394 17.2958 20.3653 17.1906 20.3109 17.0983C20.2565 17.0059 20.1783 16.9299 20.0845 16.878Z"/>
    </svg>
    <audio ref={ref} src={`https://britlex.ru/mp3/${wordq}.mp3`} />
    </>
  )
};

export default UIPlayer;
